rules:
  validators:
    seaf.ta.components.network.existence:
      uid: network-components-error-existence
      description: >
        Должны быть определены и описаны сетевые устройства
      title: Наличие сетевых устройств
      source: >
        (
              $domain := sber.domain;
              $fn := $.seaf_dzo_core."validation.functions"."network";
              $fn_dzo := $.seaf_dzo_core."validation.functions"."network_dzo";
             
              $result := $eval($fn);
              $result_dzo := $eval($fn_dzo);
          
              [ $result.iserrors = true and $result_dzo.iserrors = true ? (
                  {
                      "uid": $self.uid & '-01',
                      "title": "Отсутствуют сетевые устройства",
                      "location": "entities/seaf.ta.components.network/registry?domain=" & $domain,
                      "correction": 'Необходимо заполнить сущность "seaf.ta.components.network" или "seaf.ta.components.network_dzo"',
                      "description": $self.description
                  }
              )]
        )
    seaf.ta.services.network.existence:
      uid: network-services-error-existence
      description: >
        Должны быть определены и описаны компьютерные сети
      title: Наличие компьютерных сетей
      source: >
        (
            
              $fn := $.seaf_dzo_core."validation.functions"."network_services";
              $domain := sber.domain;
              $result := $eval($fn);
          
              [$result.iserrors = true ? (
                  {
                      "uid": $self.uid & '-01',
                      "title": "Отсутствуют компьютерные сети",
                      "location": "entities/seaf.ta.services.network/registry?domain=" & $domain,
                      "correction": 'Необходимо заполнить сущность "seaf.ta.services.network"',
                      "description": $self.description
                  }
              )]
        )